#!/usr/bin/env bash

# Issue: Implement Password Generation Functions
# Description:
# Create a function that generates passwords, The password should consist of uppercase letters, lowercase letters, numbers, and special characters. The function should take in a single argument, which is the length of the password to generate. The function should return the generated password.

generate_password() {
    local length=$1
    local password=""
    while true; do
        password=$(openssl rand -base64 1000 | tr -dc 'a-zA-Z0-9!@#$%^&*()_+-=' | fold -w "$length" | head -n 1)
        if [[ "$password" =~ [[:upper:]] && "$password" =~ [[:lower:]] && "$password" =~ [[:digit:]] && "$password" =~ [[:punct:]] ]]; then
            break
        fi
    done

    echo "$password"
}
generated_password=$(generate_password $1)
echo "Generated Password: $generated_password"