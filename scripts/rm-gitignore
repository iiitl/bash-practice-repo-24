#!/usr/bin/env bash

# iterate through each git repository found in the current directory
find . -name .git -type d -prune -exec bash -c '
 for repo_dir; do
 
    patterns=$(cat .gitignore | grep -v "^#")

   # Remove matching files 
   find . -type f ! -name .gitignore -regex "$patterns" -delete
 done
' \;
